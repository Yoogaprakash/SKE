<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sales Reports - Company</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
  <link rel="stylesheet" href="assets/css/styles.css" />
</head>

<body data-page="reports">
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow-sm">
    <div class="container-fluid">
      <a class="navbar-brand fw-bold" href="index.html" id="navShopName">Company</a>
      <div class="d-flex gap-2">
        <a class="btn btn-light" href="index.html">Back to Store</a>
      </div>
    </div>
  </nav>

  <main class="container py-4">
    <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center gap-3 mb-4">
      <div>
        <h2 class="mb-1">Sales Dashboard</h2>
        <p class="text-muted mb-0">
          Track daily, monthly, and yearly revenue from completed sales.
        </p>
      </div>
      <div class="d-flex gap-2">
        <button class="btn btn-outline-success" id="exportExcelBtn">
          <i class="bi bi-file-earmark-spreadsheet"></i> Export Excel
        </button>
        <button class="btn btn-outline-danger" id="exportPdfBtn">
          <i class="bi bi-file-earmark-pdf"></i> Export PDF
        </button>

      </div>
    </div>

    <section class="row g-3 mb-4">
      <div class="col-md-4">
        <div class="card shadow-sm">
          <div class="card-body">
            <h6 class="text-muted text-uppercase mb-2">Today</h6>
            <h3 class="mb-0" id="dailyTotal">₹0.00</h3>
            <p class="text-muted small mb-0" id="dailyCount">0 orders</p>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card shadow-sm">
          <div class="card-body">
            <h6 class="text-muted text-uppercase mb-2">This Month</h6>
            <h3 class="mb-0" id="monthlyTotal">₹0.00</h3>
            <p class="text-muted small mb-0" id="monthlyCount">0 orders</p>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card shadow-sm">
          <div class="card-body">
            <h6 class="text-muted text-uppercase mb-2">This Year</h6>
            <h3 class="mb-0" id="yearlyTotal">₹0.00</h3>
            <p class="text-muted small mb-0" id="yearlyCount">0 orders</p>
          </div>
        </div>
      </div>
    </section>

    <section class="card shadow-sm">
      <div class="card-header">
        <div class="d-flex flex-column flex-md-row justify-content-between gap-2 align-items-md-center mb-3">
          <div>
            <h5 class="mb-1">Sales History</h5>
            <p class="text-muted small mb-0">All recorded sales are listed below.</p>
          </div>
          <div>
            <span class="text-muted small me-2">Filtered Total:</span>
            <span id="filteredTotal" class="badge bg-primary fs-6">₹0.00</span>
          </div>
        </div>
        <div class="row g-2">
          <div class="col-md-2">
            <label for="filterDateFrom" class="form-label small text-muted">From Date</label>
            <input type="date" class="form-control form-control-sm" id="filterDateFrom" />
          </div>
          <div class="col-md-2">
            <label for="filterDateTo" class="form-label small text-muted">To Date</label>
            <input type="date" class="form-control form-control-sm" id="filterDateTo" />
          </div>
          <div class="col-md-3">
            <label for="filterByCustomer" class="form-label small text-muted">Customer</label>
            <input type="text" class="form-control form-control-sm" id="filterByCustomer"
              placeholder="Search customer..." />
          </div>
          <div class="col-md-3">
            <label for="filterByDescription" class="form-label small text-muted">Description</label>
            <input type="text" class="form-control form-control-sm" id="filterByDescription"
              placeholder="Search items..." />
          </div>
          <div class="col-md-2">
            <label for="filterByCategory" class="form-label small text-muted">Category</label>
            <select class="form-select form-select-sm" id="filterByCategory">
              <option value="">All Categories</option>
            </select>
          </div>
        </div>
      </div>
      <div class="table-responsive">
        <table class="table table-striped align-middle mb-0" id="salesTable">
          <thead class="table-light">
            <tr>
              <th style="width: 100px;">Actions</th>
              <th>Bill No</th>
              <th>Date</th>
              <th>Customer Name</th>
              <th class="text-end">Amount</th>
            </tr>
          </thead>
          <tbody id="salesTableBody">
            <tr>
              <td colspan="5" class="text-center text-muted">No sales recorded yet.</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>
  </main>

  <!-- View Bill Modal -->
  <div class="modal fade" id="viewBillModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Bill Details</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body p-0">
          <iframe id="billFrame" style="width: 100%; height: 500px; border: none;"></iframe>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" id="downloadBillModalBtn">
            <i class="bi bi-download"></i> Download PDF
          </button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js" crossorigin="anonymous"
    referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"
    crossorigin="anonymous"></script>
  <script src="assets/js/invoice.js"></script>
  <script src="assets/js/reports.js"></script>
</body>

</html>